はてブエントリーページ旧仕様化
----------------
<p style="text-align: right;">»<a href="/gm/hatebu_entry_page_downgrader_1.0.1.user.js">Install</a></p>
<br>
はてブのエントリーページを旧仕様っぽく表示する Greasemonkey スクリプトです。<br>
Chrome / Firefox 両対応。上部 Install リンクからインストールして下さい。<br>
<br>
<div style="border: solid 1px #f00; padding: 10px;">
【2011-08-09追記】<br>
8月4日に行われたエントリーページの変更 (<a href="http://hatena.g.hatena.ne.jp/hatenabookmark/20110804/1312446687" target="_blank">はてなブックマークのエントリーページの表示を変更しました。</a>) により、このスクリプトは正しく動作しなくなりました。<br>
新しいデザインに対応させるかどうか、しばらく現在のデザインを利用した上で検討します。<br>
</div>
<br>
<h4>出来ること</h4>
<ul>
	<li>新着ブックマークコメントを全てのブックマークに差し替える</li>
	<li>人気のブックマークコメントを開閉可能にする</li>
	<li>ユーザのアイコンを小さく表示</li>
	<li>ブコメの伸びを表すグラフを表示</li>
</ul>
<br>
<h4>スクリーンショット</h4>
【BEFORE】<br>
<a href="//s.otchy.net/uploads/2011/06/before_01.png"><img src="//s.otchy.net/uploads/2011/06/before_01-280x300.png" alt="" title="before_01" width="280" height="300" class="aligncenter size-medium wp-image-1342"></a><br>
【AFTER】アイコンを小さく<br>
<a href="//s.otchy.net/uploads/2011/06/after_01.png"><img src="//s.otchy.net/uploads/2011/06/after_01-280x300.png" alt="" title="after_01" width="280" height="300" class="aligncenter size-medium wp-image-1343"></a><br>
【BEFORE】<br>
<a href="//s.otchy.net/uploads/2011/06/before_02.png"><img src="//s.otchy.net/uploads/2011/06/before_02-280x300.png" alt="" title="before_02" width="280" height="300" class="aligncenter size-medium wp-image-1344"></a><br>
【AFTER】人気のブックマークコメントを開閉<br>
<a href="//s.otchy.net/uploads/2011/06/after_02a.png"><img src="//s.otchy.net/uploads/2011/06/after_02a-280x300.png" alt="" title="after_02a" width="280" height="300" class="aligncenter size-medium wp-image-1345"></a><br>
<a href="//s.otchy.net/uploads/2011/06/after_02b.png"><img src="//s.otchy.net/uploads/2011/06/after_02b-280x300.png" alt="" title="after_02b" width="280" height="300" class="aligncenter size-medium wp-image-1346"></a><br>
【BEFORE】<br>
<a href="//s.otchy.net/uploads/2011/06/before_03.png"><img src="//s.otchy.net/uploads/2011/06/before_03-280x300.png" alt="" title="before_03" width="280" height="300" class="aligncenter size-medium wp-image-1347"></a><br>
【AFTER】全てのブックマーク (スクロールバーの幅にも注目！) とグラフ<br>
<a href="//s.otchy.net/uploads/2011/06/after_03.png"><img src="//s.otchy.net/uploads/2011/06/after_03-280x300.png" alt="" title="after_03" width="280" height="300" class="aligncenter size-medium wp-image-1348"></a><br>
<br>
<h4>動作確認</h4>
Google Chrome 12 と Firefox 3.6＋Greasemonkey 0.9.5 で動作確認しています。恐らく他のブラウザでも動くだろうとは思います。<br>
<br>
<h4>制限事項</h4>
ロード完了後にウィンドウサイズを変更するとレイアウトが崩れます。(要望多ければ対応しますが、動作が重くなります。)<br>
ブックマーク数が多い場合、回線速度やはてなのサーバの状況によっては、読み込みに時間がかかることがあります。(不可避)<br>
ブックマーク数が多い場合、特に Firefox で動作が重くなる場合があります。(Firefox 頑張れ。未確認だけど 4 なら大丈夫？)<br>
<br>
<h4>動作原理</h4>
見た目の調整はもちろん、スタイルの書き換えやイベントの追加で実現しています。<br>
一番ポイントになる、全てのブックマークを読み込む部分は、「すべてのブックマークを見る」で表示されるページを加工した上で、iframe で埋め込んでいます。<br>
当初 iframe ではなく HTML の流しこみで対応しようとしましたが、スターの付与をはじめとして、JavaScript で制御されている部分が多かったため、iframe 埋込みで元々の動作はそのまま活かしています。<br>
このスクリプトを導入すると、エントリーページを開くたびに、2 回リクエストが発生するので、はてなには申し訳ない感じですが、このくらいは多めに見て欲しいところですね。<br>
<br>
<h4>免責事項</h4>
例によって、作者の Otchy はこのスクリプトの利用に際して一切の保証を行いません。<br>
また、改造・改変大歓迎です。何か面白いものが出来たら是非連絡を下さい。