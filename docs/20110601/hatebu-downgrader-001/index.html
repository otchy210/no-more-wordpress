
<html>
<head>
<title>[α版]はてブエントリーページを旧仕様っぽくする Greasemonkey - OTCHY.NET</title>
<link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/mini.css/3.0.1/mini-default.min.css>
<meta name=viewport content="width=device-width,initial-scale=1">
<style>:root{--back-color:#fff}.prev{text-align:left}.prev::before{transform:rotateZ(180deg)}.next{text-align:right}.next::after,.prev::before{display:inline-block;content:"➤"}</style>
</head>
<body>
<header class="sticky row">
<div class="col-sm-12 col-md-10 col-md-offset-1">
<a href=/ class=button>Home</a>
<a href=/javascript/ class=button>JavaScript</a>
<a href=/greasemonkey/ class=button>Greasemonkey</a>
<a href=/php/ class=button>PHP</a>
</div>
</header>
<main class=container>
<div class=row>
<div class="col-sm-12 col-md-10 col-md-offset-1">
<h1>[α版]はてブエントリーページを旧仕様っぽくする Greasemonkey</h1>
<hr>
</div>
</div>
<div class=row>
<div class="col-sm-12 col-md-10 col-md-offset-1">
はてブのエントリーページを旧仕様っぽくする Greasemonkey 書きました。<br>
まだ超α版なので、user.js ファイルでは置きません。<br>
Chrome でしか確認してないです。まあ Firefox でも動くんじゃないかな？たぶん。<br>
<br>
<pre>// ==UserScript==
// @name         Hatebu Entry Page Downgrader
// @namespace    http://www.otchy.net/
// @version      0.0.1
// @include      http://b.hatena.ne.jp/entry*
// ==/UserScript==

(function (callback) {
    var script = document.createElement("script");
    script.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js");
    script.addEventListener('load', function() {
        var script = document.createElement("script");
        script.textContent = "(" + callback.toString() + ")();";
        document.body.appendChild(script);
    }, false);
    document.body.appendChild(script);
})(function() {
    var isMore = (location.href.indexOf('mode=more') >= 0);
    if (!isMore) {
        var iframe = $('&lt;iframe />');
        iframe.hide();
        $(document.body).append(iframe);
        var href = $('#more-link a').attr('href');
        iframe.attr('src', href);
    } else {
        var pBody = $(parent.document.body);
        var iBody = $(document.body);
        var bk = iBody.find('#new-bookmarks');
        pBody.find('#new-bookmarks').html(bk.html());
        pBody.find('ul.bookmark-list li').css({'padding': '5px 0px 5px 30px'}).find('img.profile-image').css({'width': '16px', 'height': '16px', 'margin-left': '-20px'});
        var scored = pBody.find('#scored-bookmarks');
        var sToggle = $('&lt;span />').toggle(function() {
            scored.find('.bookmark-list').hide();
            $(this).text('[開く]');
        }, function() {
            scored.find('.bookmark-list').show();
            $(this).text('[閉じる]');
        });
        scored.find('h4.entry-page-main-subtitle .inner').append(sToggle);
        sToggle.css({'cursor': 'pointer'}).click();
    }
});
</pre>
<br>
<h4>出来る事</h4>
<ul>
<li>エントリーページの「新着」ブックマークを「全ての」ブックマークに差し替え</li>
<li>ユーザのアイコンを 16 x 16 に変更</li>
<li>人気のブックマークの表示/非表示切り替え</li>
</ul>
<br>
<h4>出来ない事</h4>
<ul>
<li>コメントのみ表示チェックが効かない</li>
<li>スターが付けられない</li>
<li>グラフが見れない</li>
</ul>
現状は、全てのブックマークを表示するページから HTML を親ページに流し込んでる実装です。<br>
この実装だと、上記の問題解決はかなり難しそうです。<br>
なので、全てのブックマークページをそのまま iframe で埋め込む方法に実装を変更する予定なのですが、とりあえず情報参照だけなら綺麗に動いたのでアルファ版として公開してみました。<br>
<br>
フィードバック、改造報告などがあれば是非コメントに！
</div>
</div>
<div class=row>
<div class="col-sm-12 col-md-10 col-md-offset-1">
<hr>
カテゴリ:
<a href=/category/dev/ >Development</a>
タグ:
<a href=/tag/greasemonkey/ >greasemonkey</a>
<a href=/tag/%e3%81%af%e3%81%a6%e3%83%96/ >はてブ</a>
</div>
</div>
<div class=row>
<div class="col-sm-12 col-md-10 col-md-offset-1">
<hr>
</div>
<div class="col-sm-12 col-md-10 col-md-offset-1 col-lg-5 col-lg-offset-1 prev">
<a href=/20110525/iphone-dictionary/ >iPhone で文字入力速度を劇的に改善するお勧め辞書登録</a>
</div>
<div class="col-sm-12 col-md-10 col-md-offset-1 col-lg-5 col-lg-offset-0 next">
<a href=/20110606/facebook-is-not-closing-down-google/ >Facebook が Google を廃業に追い込めない理由</a>
</div>
</div>
</main>
<footer>
<div class="col-sm-12 col-md-10 col-md-offset-1">
Copyright © OTCHY.NET authored by <a href=https://twitter.com/otchy target=_blank>@otchy</a>
</div>
</footer>
</body>
</html>
